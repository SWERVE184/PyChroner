<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Log Stream | PyChroner Web UI</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script>
            $(document).ready(
                function() {
                    let obj = $("#console");
                    let eventSource = new EventSource("/api/stream");

                    eventSource.onmessage = function (e) {
                        let d = JSON.parse(e.data);
                        obj.html(`${obj.html()}[${d.time}] [${d.name} ${d.thread_name}&lt;${d.function_name}:${d.line}&gt;/<span class="${d.type}">${d.type}</span>]: <span class="${d.type}">${d.log}</span><br>`);
                    }
                }
            );
        </script>
        <style>
            #console {
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                overflow-y: scroll;
                font-size: 11px;
                font-family: "Courier New", Courier, monospace;
                padding: 10px;
                background: #002B36;
                color: #ccc;
            }

            span.critical {
                color: #CB4B16;
            }
            span.error {
                color: #DC322F;
            }
            span.warning {
                color: #B58900;
            }
            span.info {
            }
            span.debug {
                color: #2AA198;
            }

        </style>
    </head>
    <body>
        <pre>
            <code id="console"></code>
        </pre>
    </body>
</html>
